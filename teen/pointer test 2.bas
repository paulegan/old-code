REM pointer
DECLARE SUB BUTTON (X1!, Y1!, X2!, Y2!, HL!, SH!, CL!)
STP = 20: ARC = 15: DIM P(34): DIM B(34)
ON ERROR GOTO PERR

SCREEN 9
GOSUB GETARR
COLOR 1, 7
PALETTE 5, 7
PALETTE 6, 56
PALETTE 7, 63

CALL BUTTON(100, 100, 200, 150, 7, 6, 5)
CALL BUTTON(100, 200, 200, 250, 7, 6, 5)
CALL BUTTON(250, 100, 400, 150, 7, 6, 5)
CALL BUTTON(250, 200, 400, 250, 7, 6, 5)
LOCATE 9, 17: PRINT "CANCEL"
PSET (5, 5), 0

X = 5: Y = 5
START:
DO
A$ = INKEY$
LOOP UNTIL A$ = ""
DO
A$ = INKEY$
LOOP WHILE A$ = ""
IF A$ = CHR$(13) THEN GOTO PRESS
IF A$ = CHR$(0) + "P" THEN
 PUT (X, Y), B, PSET
 GET STEP(0, STP)-STEP(8, 16), B
 LET Y = Y + STP
 PUT (X, Y), P, PSET
 GOTO START
END IF
IF A$ = CHR$(0) + "H" THEN
 PUT (X, Y), B, PSET
 GET STEP(0, -STP)-STEP(8, 16), B
 LET Y = Y - STP
 PUT (X, Y), P, PSET
 GOTO START
END IF
IF A$ = CHR$(0) + "M" THEN
 PUT (X, Y), B, PSET
 GET STEP(STP, 0)-STEP(8, 16), B
 LET X = X + STP
 PUT (X, Y), P, PSET
 GOTO START
END IF
IF A$ = CHR$(0) + "K" THEN
 PUT (X, Y), B, PSET
 GET STEP(-STP, 0)-STEP(8, 16), B
 LET X = X - STP
 PUT (X, Y), P, PSET
 GOTO START
END IF
IF A$ = CHR$(27) THEN END
GOTO START

PRESS:
 IF X < 100 OR X > 200 THEN GOTO START
 IF Y < 100 OR Y > 150 THEN GOTO START
 CALL BUTTON(100, 100, 200, 150, 6, 7, 5)
 LOCATE 9, 17: PRINT "CANCEL"
  FOR PAUSE = 1 TO 350: NEXT PAUSE
 CALL BUTTON(100, 100, 200, 150, 7, 6, 5)
 LOCATE 9, 17: PRINT "CANCEL"
 PUT (X, Y), P, PSET
GOTO START


PERR:
IF ERR = 5 THEN GOTO START
PRINT ERR
END

GETARR:
 GET (100, 100)-(108, 116), B
 LINE (101, 101)-(101, 111), ARC
 LINE (102, 101)-(108, 107), ARC
 LINE (108, 107)-(106, 109), ARC
 LINE (106, 109)-(106, 110), ARC
 LINE (107, 111)-(107, 112), ARC
 LINE (105, 111)-(105, 112), ARC
 LINE (108, 113)-(108, 114), ARC
 LINE (106, 113)-(106, 114), ARC
 LINE (103, 110)-(104, 110), ARC
 LINE (102, 111)-(102, 111), ARC
 LINE (107, 115)-(107, 115), ARC
 GET (100, 100)-(108, 116), P
 LINE (100, 100)-(108, 116), 0, BF
RETURN

SUB BUTTON (X1, Y1, X2, Y2, HL, SH, CL)
LINE (X1, Y1)-(X2, Y2), CL, BF
FOR A = 0 TO 2
 LINE (X1 + A, Y2 - A)-(X1 + A, Y1 + A), HL
 LINE STEP(0, 0)-(X2 - A, Y1 + A), HL
 LINE (X1 + A, Y2 - A)-(X2 - A, Y2 - A), SH
 LINE STEP(0, 0)-(X2 - A, Y1 + A), SH
NEXT A
END SUB

